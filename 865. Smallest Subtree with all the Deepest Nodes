865. Smallest Subtree with all the Deepest Nodes

TreeNode* subtreeWithAllDeepest(TreeNode* root) {
    auto ret = dfs(root);
    return ret.first;
}
// first: lca for the input, second: depth
pair<TreeNode*, int> dfs(TreeNode* root) {
    if (!root) return make_pair(root, 0);
    auto left = dfs(root->left);
    auto right = dfs(root->right);
    if (left.second == right.second) {
        return make_pair(root, left.second + 1);
    } else {
        if (left.second > right.second) {
            return {left.first, left.second + 1};
        } else {
            return {right.first, right.second + 1};
        }
    }
}
